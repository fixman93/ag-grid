import"@sagi.io/globalthis";function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}class e{constructor(e){this.type="postProcessor",this.name="phraseInContextEditor",this.config=t({},globalThis.PHRASEAPP_CONFIG,e),this.phraseEnabled=e.phraseEnabled}static get IN_CONTEXT_EDITOR_SCRIPT_URL(){return"https://phrase.com/assets/in-context-editor/2.0/app.js?"+(new Date).getTime()}static interpolateKey(t,e,r){return e+"phrase_"+t+r}static loadInContextEditorScript(){if("undefined"!=typeof window){const t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=this.IN_CONTEXT_EDITOR_SCRIPT_URL;const e=document.getElementsByTagName("script")[0];return e&&e.parentNode?e.parentNode.insertBefore(t,e):document.body.appendChild(t),t}}interpolateKey(t){return e.interpolateKey(t,this.config.prefix,this.config.suffix)}process(t,e,r,i){return this.phraseEnabled?this.interpolateKey(e[0]):t}set phraseEnabled(t){globalThis.PHRASEAPP_ENABLED=t,t&&this.config.scriptAutoLoad&&!this.phraseScript&&(this.phraseScript=e.loadInContextEditorScript())}get phraseEnabled(){return globalThis.PHRASEAPP_ENABLED}set config(r){globalThis.PHRASEAPP_CONFIG=t({},e.defaultConfig,r)}get config(){return globalThis.PHRASEAPP_CONFIG}toScriptHTML(){return`<script>window.PHRASEAPP_ENABLED=true;window.PHRASEAPP_CONFIG=${JSON.stringify(this.config)}<\/script><script type="text/javascript" async src="${e.IN_CONTEXT_EDITOR_SCRIPT_URL}"><\/script>`}}e.defaultConfig={prefix:"{{__",suffix:"__}}",fullReparse:!0,scriptAutoLoad:!0};export default e;
//# sourceMappingURL=i18next-phrase-in-context-editor-post-processor.modern.js.map
