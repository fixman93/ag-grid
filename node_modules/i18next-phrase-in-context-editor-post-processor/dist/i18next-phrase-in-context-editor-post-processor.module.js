import"@sagi.io/globalthis";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var n=function(){function n(t){this.type="postProcessor",this.name="phraseInContextEditor",this.config=e({},globalThis.PHRASEAPP_CONFIG,t),this.phraseEnabled=t.phraseEnabled}n.interpolateKey=function(t,e,n){return e+"phrase_"+t+n},n.loadInContextEditorScript=function(){if("undefined"!=typeof window){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=this.IN_CONTEXT_EDITOR_SCRIPT_URL;var e=document.getElementsByTagName("script")[0];return e&&e.parentNode?e.parentNode.insertBefore(t,e):document.body.appendChild(t),t}};var r,i,o,a=n.prototype;return a.interpolateKey=function(t){return n.interpolateKey(t,this.config.prefix,this.config.suffix)},a.process=function(t,e,n,r){return this.phraseEnabled?this.interpolateKey(e[0]):t},a.toScriptHTML=function(){return"<script>window.PHRASEAPP_ENABLED=true;window.PHRASEAPP_CONFIG="+JSON.stringify(this.config)+'<\/script><script type="text/javascript" async src="'+n.IN_CONTEXT_EDITOR_SCRIPT_URL+'"><\/script>'},r=n,o=[{key:"IN_CONTEXT_EDITOR_SCRIPT_URL",get:function(){return"https://phrase.com/assets/in-context-editor/2.0/app.js?"+(new Date).getTime()}}],(i=[{key:"phraseEnabled",get:function(){return globalThis.PHRASEAPP_ENABLED},set:function(t){globalThis.PHRASEAPP_ENABLED=t,t&&this.config.scriptAutoLoad&&!this.phraseScript&&(this.phraseScript=n.loadInContextEditorScript())}},{key:"config",get:function(){return globalThis.PHRASEAPP_CONFIG},set:function(t){globalThis.PHRASEAPP_CONFIG=e({},n.defaultConfig,t)}}])&&t(r.prototype,i),o&&t(r,o),n}();n.defaultConfig={prefix:"{{__",suffix:"__}}",fullReparse:!0,scriptAutoLoad:!0};export default n;
//# sourceMappingURL=i18next-phrase-in-context-editor-post-processor.module.js.map
